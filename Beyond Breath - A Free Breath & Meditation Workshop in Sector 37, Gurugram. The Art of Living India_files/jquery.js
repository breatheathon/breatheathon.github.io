(function(e){function t(t){var n=e(this),r=null,i=[],s=null,o=null,u=e.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop,width:"auto"},t);var a=3,f=250;var l=function(e){i.push({x:e.pageX,y:e.pageY});if(i.length>a){i.shift()}};var c=function(){if(o){clearTimeout(o)}if(u.exitMenu(this)){if(r){u.deactivate(r)}r=null}};var h=function(){u.enter(this);m(this)},p=function(){if(o){clearTimeout(o)}u.exit(this)};var d=function(){v(this)};var v=function(e){if(e==r){return}if(r){u.deactivate(r)}u.activate(e);r=e};var m=function(e){var t=g();if(t){o=setTimeout(function(){m(e)},t)}else{v(e)}};var g=function(){function g(e,t){return(t.y-e.y)/(t.x-e.x)}if(!r||!e(r).is(u.submenuSelector)){return 0}var t=n.offset(),o="auto"==u.width?n.outerWidth():u.width,a={x:t.left,y:t.top-u.tolerance},l={x:t.left+o,y:a.y},c={x:t.left+n.outerWidth(),y:a.y},h={x:t.left,y:t.top+n.outerHeight()+u.tolerance},p={x:t.left+o,y:h.y},d={x:t.left+n.outerWidth(),y:h.y},v=i[i.length-1],m=i[0];if(!v){return 0}if(!m){m=v}if(m.x<t.left||m.x>d.x||m.y<t.top||m.y>d.y){return 0}if(s&&v.x==s.x&&v.y==s.y){return 0}var y=l,b=p;if(u.submenuDirection=="left"){y=h;b=a}else if(u.submenuDirection=="below"){y=p;b=h}else if(u.submenuDirection=="above"){y=a;b=l}var w=g(v,y),E=g(v,b),S=g(m,y),x=g(m,b);if(w<S&&E>x){s=v;return f}s=null;return 0};n.mouseleave(c).find(u.rowSelector).mouseenter(h).mouseleave(p).click(d);e(document).mousemove(l)}e.fn.menuAim=function(e){this.each(function(){t.call(this,e)});return this};})(jQuery)