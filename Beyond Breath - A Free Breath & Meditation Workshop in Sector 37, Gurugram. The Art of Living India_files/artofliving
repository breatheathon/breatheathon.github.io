function play(a){return console.log("Playing"),new Promise(function(b,c){var d=new Audio;d.preload="auto",d.autoplay=!0,d.onerror=c,d.onended=b,d.src=a})}function inIframe(){try{return window.self!==window.top}catch(a){return!0}}function addTrace(a,b){if("undefined"!=typeof Storage&&storageAvailable("localStorage")){var c=JSON.parse(localStorage.getItem("trilyo-trace-artofliving")||"{}");switch(c.user||(c.user={}),a.toLowerCase()){case"name":c.user.name=checkValue(b);break;case"email":c.user.email=checkValue(b);break;case"phone":c.user.phone=checkValue(b);break;default:c[a.toLowerCase()]=b}localStorage.setItem("trilyo-trace-artofliving",JSON.stringify(c))}}function getTrace(a){if("undefined"==typeof Storage||!storageAvailable("localStorage"))return null;var b=JSON.parse(localStorage.getItem("trilyo-trace-artofliving")||"{}");switch(a.toLowerCase()){case"name":return b.user?(b.user.name&&"unavailable"!=b.user.name.toLowerCase()?b.user.name:null)||null:null;case"email":return b.user?(b.user.email&&"unavailable"!=b.user.email.toLowerCase()?b.user.email:null)||null:null;case"phone":return b.user?(b.user.phone&&"unavailable"!=b.user.phone.toLowerCase()?b.user.phone:null)||null:null;default:return b[a.toLowerCase()]||null}}function fetchCampaigns(){var a=new XMLHttpRequest;a.open("GET",trilyourl+"/artofliving/campaigns"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(a.readyState==XMLHttpRequest.DONE)if(200==a.status){try{campaigns=JSON.parse(a.responseText).data}catch(a){campaigns=[]}console.log("campaigns",campaigns),loadIntents(campaigns.data)}else 400==a.status?console.log("There was an error 400"):(console.log(a.status),console.log("something else other than 200 was returned"))},a.send()}function loadIntents(a){appendIntentCSS(),appendAnimationCSS(),appendIntentJS(a)}function resolve(a,b){function c(a,b,d){for(var e in b)if("object"==typeof b[e]&&void 0===b[e].value)a=d?c(a,b[e],d+e+"."):c(a,b[e],e+".");else{var f=new RegExp("uu{{"+e+"}}","gi");if(a=a.replace(f,encodeURIComponent(b[e].value||encodeURIComponent(b[e]))),d){var f=new RegExp("{{"+d+e+"}}","gi");a=a.replace(f,b[e].value||b[e])}var f=new RegExp("{{"+e+"}}","gi");a=a.replace(f,b[e].value||b[e])}return a}function d(a,b){var c;if(a.indexOf(".")>-1){var e=a.substring(0,a.indexOf("."));c=d(a.substring(a.indexOf(".")+1),b[e])}else c=b[a];return c}for(;a.indexOf("\x3c!--TR-TEMPLATE-START--\x3e")>-1;){var e=a.indexOf("\x3c!--TR-TEMPLATE-START--\x3e"),f=a.indexOf("\x3c!--TR-TEMPLATE-END--\x3e");if(!(e>-1&&f>-1))break;var g=a.substring(e,f+22);a=a.replace(g,"")}for(;a.indexOf("\x3c!--TR-DATA-START")>-1;){var e=a.indexOf("\x3c!--TR-DATA-START"),f=a.indexOf("TR-DATA-END--\x3e");if(!(e>-1&&f>-1))break;var g=a.substring(e+17,f).trim(),h=a.substring(e,f+14).trim();if("repeat"==g.substring(0,6).toLowerCase()){g=g.substring(6).trim();var i=g.substring(0,g.indexOf("<")),j=99;i.indexOf("MAX=")>-1&&(j=Number(i.trim().substring(i.indexOf("MAX="),i.indexOf(" ")).replace("MAX=","")+""),i=i.trim().replace("MAX="+j,""));var k=i.trim().replace(/ON +/gi,"");g=g.substring(g.indexOf("<"));var l="",m=1;for(var n in d(k,b)){var o=g.replace("{{key}}",n);if(o=o.replace("{{val.","{{"+k+"."+n+"."),l+=o,j&&m>=j)break;m++}a=a.replace(h,l)}else a=a.replace(h,g)}return a=c(a,b)}function appendIntentCSS(){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=trilyourl+"/css/trilyo_intent_v1.css",a.media="all",head.appendChild(a)}function appendAnimationCSS(){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=trilyourl+"/css/trilyo_animate.css",a.media="all",head.appendChild(a)}function appendIntentJS(){var a=document.createElement("script");a.type="text/javascript",a.src=trilyourl+"/js/trilyo_intent_v1.js",a.setAttribute("onload","ontrilyoload("+JSON.stringify(campaigns)+")"),head.appendChild(a)}function saveToken(a){var b=new XMLHttpRequest;b.open("POST",trilyourl+"/push_notifications/subscribe"),b.setRequestHeader("Content-Type","application/json;charset=UTF-8"),b.onreadystatechange=function(){b.readyState==XMLHttpRequest.DONE&&(200==b.status?console.log("Subscribed to events"):400==b.status?console.log("There was an error 400"):console.log("something else other than 200 was returned"))},b.send(JSON.stringify({topic:["46ab5f9c-c8d1-4ce2-a1cd-8bb5bf69eaf5","artofliving"],registrationToken:a}))}function sendGoal(){var a=new XMLHttpRequest;a.open("POST",apiUrl+"/push_notifications/goalSend"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(200==a.status?console.log("Subscribed to events"):400==a.status?console.log("There was an error 400"):console.log("something else other than 200 was returned"))};var b={entity:"artofliving",sender:"46ab5f9c-c8d1-4ce2-a1cd-8bb5bf69eaf5",source:"webapp"};default_booking_name&&default_booking_name>""&&(b.bookedWhat=default_booking_name),getTrace("name")&&(b.name=getTrace("name")),a.send(JSON.stringify(b))}function submitLeadForm(a){a.entity="artofliving",a.sender="46ab5f9c-c8d1-4ce2-a1cd-8bb5bf69eaf5";var b=new XMLHttpRequest;b.open("POST",trilyourl+"/lead/lead_submit"),b.setRequestHeader("Content-Type","application/json;charset=UTF-8"),b.onreadystatechange=function(){b.readyState==XMLHttpRequest.DONE&&(200==b.status?console.log("Subscribed to events"):400==b.status?console.log("There was an error 400"):console.log("something else other than 200 was returned"))},b.send(JSON.stringify(a))}function getSubDomain(a,b){var c=new XMLHttpRequest;c.open("GET",a),c.onreadystatechange=function(){c.readyState==XMLHttpRequest.DONE&&200==c.status&&(console.log("Subscribed to events",c.responseText),b&&b(c.responseText))},c.send()}function askPermission(a){var b=500,c=350,d=screen.width/2-b/2,e=screen.height/2-c/2,f="",g="https://"+f+".trilyonotify.com?entityId=artofliving&senderId=46ab5f9c-c8d1-4ce2-a1cd-8bb5bf69eaf5";g+="&title0=artofliving--"+a;var h=window.open("","Allow Notification","height="+c+",width="+b+",left="+d+",top="+e);h.window.location.href=g,h.focus()}function addSignUpForm(a){signupModal=new trilyo.modal({footer:!0,stickyFooter:!1,closeMethods:[],closeLabel:"Close",cssClass:["signupform"],hardOverride:!0,onOpen:function(){document.getElementById("trilyo-f-name").value=getTrace("name"),document.getElementById("trilyo-f-email").value=getTrace("email"),document.getElementById("trilyo-f-phone").value=getTrace("phone")},onClose:function(){},beforeClose:function(){return!0}}),signupModal.setContent('<form action="" id="signup_form"><div class="form-row"><label for="fname">Full name</label><input type="text" id="trilyo-f-name" placeholder="Your full name"><p class="error">Enter your complete name</p></div><div class="form-row"><label for="email">E-mail ID</label><input type="email" id="trilyo-f-email" placeholder="Your E-mail"><p class="error">Please enter your e-mail</p></div><div class="form-row"><label for="phone">Phone number</label><input type="tel" placeholder="Your phone number" autocomplete="off" id="trilyo-f-phone"><p class="error">Enter your primary phone number</p></div><div id="after-success"><p>Thank you for requesting a callback. You will get a callback from us soon</p></div></form>'),signupModal.addFooterBtn("Request a callback","trilyo-btn trilyo-btn--primary trilyo-btn","redirect",function(){var b=new XMLHttpRequest,c=document.getElementById("trilyo-f-name").value,d=document.getElementById("trilyo-f-email").value,e=document.getElementById("trilyo-f-phone").value,f=!1;c?(document.getElementById("trilyo-f-name").style.borderBottom="solid 2px #aaa3bd",f=f||!1):(f=f||!0,document.getElementById("trilyo-f-name").style.borderBottom="2px solid red"),e?(f=f||!1,document.getElementById("trilyo-f-phone").style.borderBottom="2px solid #aaa3bd"):(f=f||!0,document.getElementById("trilyo-f-phone").style.borderBottom="2px solid red"),d||(d="Unavailable"),f||(b.open("POST",apiUrl+"/booking_form/callbackSubmit/artofliving/"+c+"/"+d+"/"+e+"/46ab5f9c-c8d1-4ce2-a1cd-8bb5bf69eaf5"),b.onreadystatechange=function(){b.readyState==XMLHttpRequest.DONE&&(200==b.status?(signupModal.close(),trilyoThankYouModal.open(),a&&(window.location=a)):400==b.status?console.log("There was an error 400"):console.log("something else other than 200 was returned"))},b.send())})}function addThankyouModal(a){trilyoThankYouModal=new trilyo.modal({footer:!0,closeMethods:["overlay","escape"],closeLabel:"Close",cssClass:[]}),trilyoThankYouModal.setContent('<div style="text-align:center"><p style="display: table-cell;vertical-align: middle;min-height:50px;height:50px;font-size:18px">'+a+"</p></div>"),trilyoThankYouModal.addFooterBtn("Close","trilyo-btn trilyo-btn--primary trilyo-btn","none",function(a){trilyoThankYouModal.close()})}function ready(a){"loading"!=document.readyState?a():document.addEventListener?document.addEventListener("DOMContentLoaded",a):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&a()})}function getQueryParams(a){qs=document.location.search,qs=qs.split("+").join(" ");for(var b,c={},d=/[?&]?([^=]+)=([^&]*)/g;b=d.exec(qs);)c[decodeURIComponent(b[1])]=decodeURIComponent(b[2]);return c[a]}function appendScripts(){fetchCampaigns(),trilyocontainer=document.createElement("div"),trilyocontainer.setAttribute("id","trilyo-container"),document.body.appendChild(trilyocontainer),trilyocontainerblock=document.getElementById("trilyo-container"),trilyochatcontainer=document.createElement("iframe"),trilyochatcontainer.setAttribute("id","trilyo-chat-container"),trilyochatcontainer.setAttribute("class","trilyo-chat-container"),trilyochatcontainer.setAttribute("frameborder","0"),trilyocontainerblock.appendChild(trilyochatcontainer);var a=trilyourl+trilyofolderpath+"The%20Art%20Of%20Living/chat/v1?utm_source=The%20Art%20Of%20Living&utm_medium=webchatbot&entityID=artofliving&senderID=46ab5f9c-c8d1-4ce2-a1cd-8bb5bf69eaf5&ref="+ref+"&currTitle="+encodeURIComponent(title)+"&currUrl="+encodeURIComponent(currUrl)+appendUrl()+"&device_info="+encodeURIComponent(deviceInfo());getQueryParams("utm_source"),getQueryParams("utm_medium"),getQueryParams("utm_term"),getQueryParams("utm_content"),getQueryParams("utm_campaign"),getQueryParams("trilyo_context")&&(a+="&context="+getQueryParams("trilyo_context")),getQueryParams("trilyo_user")&&(a+="&trilyo_user="+getQueryParams("trilyo_user")),getQueryParams("trilyo_email")&&(a+="&trilyo_email="+getQueryParams("trilyo_email")),getQueryParams("trilyo_phone")&&(a+="&trilyo_phone="+getQueryParams("trilyo_phone")),trilyochatcontainer.contentWindow.location=a,trilyoextenstioncontainer=document.createElement("iframe"),trilyoextenstioncontainer.setAttribute("id","trilyo-extention"),trilyoextenstioncontainer.setAttribute("class","trilyo-extention-container"),trilyoextenstioncontainer.setAttribute("frameborder","0"),trilyoextenstioncontainer.setAttribute("style","position:absolute"),trilyocontainerblock.appendChild(trilyoextenstioncontainer),trilyobuttoncontainer=document.createElement("iframe");"undefined"!=typeof Storage&&storageAvailable("localStorage")&&localStorage.getItem("trilyo-chat-closed")&&localStorage.getItem("trilyo-chat-closed"),trilyobuttoncontainer.src=trilyourl1+trilyofolderpath1+"button_v2.html?entity=artofliving&brandColor="+brandColor+"&badge_color="+badge+"&textPrimary="+textPrimary+"&textSecondary="+textSecondary,trilyobuttoncontainer.setAttribute("id","trilyo-floating-button-holder"),trilyobuttoncontainer.setAttribute("class","trilyo-floating-button-holder"),trilyobuttoncontainer.setAttribute("frameborder","0"),trilyocontainerblock.appendChild(trilyobuttoncontainer),override>""&&(trilyobuttoncontainer.src=trilyobuttoncontainer.src+"&oval=true&override="+encodeURIComponent(override)),oval>""&&trilyobuttoncontainer.classList.add("trilyo_oval"),trilyoquickprompt=document.createElement("div"),trilyoquickprompt.innerHTML='<iframe id="trilyo-quickprompt-iframe" src="'+trilyourl1+trilyofolderpath1+"quickprompt_v2.1.html?entity=artofliving&brandColor="+brandColor+"&badge_color="+badge+"&textPrimary="+textPrimary+"&textSecondary="+textSecondary+'&1" frameborder=0 width="100%" height="100%" />',trilyoquickprompt.setAttribute("id","trilyo-quickprompt"),trilyoquickprompt.setAttribute("class","trilyo-quickprompt"),trilyocontainerblock.appendChild(trilyoquickprompt),document.getElementById("trilyo-container").click();var b=window.addEventListener?"addEventListener":"attachEvent";(0,window[b])("attachEvent"===b?"onmessage":"message",function(a){a.origin!=apiUrl&&a.origin!=trilyourl&&a.origin!=trilyourl1&&"open"!=a.data&&"close"!=a.data||openWidget(a)})}function openWidget(a){var b=document.getElementById("trilyo-chat-container"),c=document.getElementById("trilyo-quickprompt"),d=document.getElementById("trilyo-floating-button-holder");if(a.data instanceof Object){if("general"==a.data.type)return d.classList.remove("new_message"),document.getElementById("trilyo-quickprompt-iframe").classList.remove("new_message"),stateIsOpen||d.contentWindow.postMessage(a.data,"*"),void setTimeout(function(){d.classList.add("new_message"),document.getElementById("trilyo-quickprompt-iframe").classList.add("new_message")},100);if("openWebView"==a.data.type){emitEvent("chatbot","openWebView","artofliving");var e=a.data.message;openWebView(e.url,e.title,e.height,e.width),webviewFrame=document.getElementById("trilyoWebviewIframe")}else if("redirect"==a.data.type){emitEvent("chatbot","redirect","artofliving");var f=a.data.message;window.location=f.url}if("welcome"==a.data.type){console.log("CAIGHT"),document.getElementById("trilyo-quickprompt-iframe").contentWindow.postMessage(a.data,"*");var g=c.className,h=g.concat(" shownOnce");return void(c.className=h)}if("livewire"==a.data.type)return console.log("livewireShown"),void(enable_nudging&&showNudge(a.data));if("event"==a.data.type)return void emitEvent("chatbot",a.data.action,"artofliving");"name"==a.data.type&&emitEvent("chatbot","Name given","artofliving"),"email"==a.data.type&&emitEvent("chatbot","Email given","artofliving"),"phone"==a.data.type&&emitEvent("chatbot","Phone given","artofliving"),addTrace(a.data.type,a.data.message)}else if("loaded"==a.data){var g=d.className,h=g.concat(" shownOnce");d.className=h,disableSanta||addXMasHat(),ready(function(){try{play("https://content.trilyo.com/script-assets/loaded.mp3").then(function(){console.log("Played")}).catch(function(a){console.log("not played")})}catch(a){console.error("not played2")}})}else if("open"==a.data||"fomo-open"==a.data){stateIsOpen=!0,c.style.display="none",addTrace("chatOpenedOnce","true");var i=document.getElementById("trilyo-chat-container").contentWindow;"fomo-open"==a.data?(i.postMessage("startchatting","*"),emitEvent("chatbot","fomo-open","artofliving")):(i.postMessage("requestfocus","*"),emitEvent("chatbot","open","artofliving")),getQueryParams("trilyo_focus")&&i.postMessage("startchatting","*");var g=b.className,h=g.concat(" expand");b.className=h,c.style.display="none";var g=trilyocontainer.className,j=g.concat(" expand");trilyocontainer.className=j,trilyobuttoncontainer.style.display="none";var k=new CustomEvent("container_mobile",{detail:{mobile:"1"}});document.body.clientWidth<425&&b.dispatchEvent(k),"undefined"!=typeof Storage&&storageAvailable("localStorage")&&localStorage.setItem("trilyo-chat-closed",!1),santa&&(santa.style.height="84px",santa.style.right=document.getElementById("trilyo-container").offsetWidth-60+"px",santa.style.bottom=document.getElementById("trilyo-container").offsetHeight-20+"px",santa.classList.add("trilyo-open"))}else if("close"==a.data){stateIsOpen=!1,emitEvent("chatbot","closed","artofliving"),d.classList.remove("new_message"),trilyobuttoncontainer.style.display="block",b.classList.remove("expand"),trilyocontainer.classList.remove("expand"),c.style.display="none",d.style.top="auto",santa&&(santa.setAttribute("style",null),santa.classList.remove("trilyo-open")),document.body.clientWidth;var i=document.getElementById("trilyo-chat-container").contentWindow;i.postMessage("requestfocus","*"),"undefined"!=typeof Storage&&storageAvailable("localStorage")&&localStorage.setItem("trilyo-chat-closed",!0)}else"askPermission"==a.data?askPermission():"closeframe"==a.data&&webview.close()}function setCookie(a,b,c,d){var e=new Date;d?(c=Number(""+c),e.setTime(e.getTime()+c)):e.setTime(e.getTime()+60*c*1e3);var f="expires="+e.toUTCString();if(document.domain.indexOf("localhost")>-1&&document.domain.indexOf(".")>-1){const g="domain="+document.domain.match(/[^\.]*\.[^.]*$/)[0]+";";document.cookie=a+"="+b+";"+f+";path=/;"+g}else document.cookie=a+"="+b+";"+f+";path=/"}function getCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return""}function storageAvailable(a){try{var b=window[a],c="__storage_test__";return b.setItem(c,c),b.removeItem(c),!0}catch(a){return!1}}function checkValue(a){return-1==a.toLowerCase().indexOf("dont")&&-1==a.toLowerCase().indexOf("don't")&&-1==a.toLowerCase().indexOf("skip")&&-1==a.toLowerCase().indexOf("without")&&-1==a.toLowerCase().indexOf("no ")&&-1==a.toLowerCase().indexOf(" no ")&&-1==a.toLowerCase().indexOf("no,")&&"no"!=a.toLowerCase()?a:"Unavailable"}function deviceInfo(){var a="-",b="";screen.width&&(width=screen.width?screen.width:"",height=screen.height?screen.height:"",b+=width+" x "+height);var c,d,e,f=navigator.appVersion,g=navigator.userAgent,h=navigator.appName,i=""+parseFloat(navigator.appVersion),j=parseInt(navigator.appVersion,10);-1!=(d=g.indexOf("Opera"))&&(h="Opera",i=g.substring(d+6),-1!=(d=g.indexOf("Version"))&&(i=g.substring(d+8))),-1!=(d=g.indexOf("OPR"))?(h="Opera",i=g.substring(d+4)):-1!=(d=g.indexOf("Edge"))?(h="Microsoft Edge",i=g.substring(d+5)):-1!=(d=g.indexOf("MSIE"))?(h="Microsoft Internet Explorer",i=g.substring(d+5)):-1!=(d=g.indexOf("Chrome"))?(h="Chrome",i=g.substring(d+7)):-1!=(d=g.indexOf("Safari"))?(h="Safari",i=g.substring(d+7),-1!=(d=g.indexOf("Version"))&&(i=g.substring(d+8))):-1!=(d=g.indexOf("Firefox"))?(h="Firefox",i=g.substring(d+8)):-1!=g.indexOf("Trident/")?(h="Microsoft Internet Explorer",i=g.substring(g.indexOf("rv:")+3)):(c=g.lastIndexOf(" ")+1)<(d=g.lastIndexOf("/"))&&(h=g.substring(c,d),i=g.substring(d+1),h.toLowerCase()==h.toUpperCase()&&(h=navigator.appName)),-1!=(e=i.indexOf(";"))&&(i=i.substring(0,e)),-1!=(e=i.indexOf(" "))&&(i=i.substring(0,e)),-1!=(e=i.indexOf(")"))&&(i=i.substring(0,e)),j=parseInt(""+i,10),isNaN(j)&&(i=""+parseFloat(navigator.appVersion),j=parseInt(navigator.appVersion,10));var k=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(f),l=!!navigator.cookieEnabled;void 0!==navigator.cookieEnabled||l||(document.cookie="testcookie",l=-1!=document.cookie.indexOf("testcookie"));var m=a,n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in n){var p=n[o];if(p.r.test(g)){m=p.s;break}}var q=a;switch(/Windows/.test(m)&&(q=/Windows (.*)/.exec(m)[1],m="Windows"),m){case"Mac OS X":q=/Mac OS X (10[\.\_\d]+)/.exec(g)[1];break;case"Android":q=/Android ([\.\_\d]+)/.exec(g)[1];break;case"iOS":q=/OS (\d+)_(\d+)_?(\d+)?/.exec(f),q=q[1]+"."+q[2]+"."+(0|q[3])}var r="no check";if("undefined"!=typeof swfobject){var s=swfobject.getFlashPlayerVersion();r=s.major>0?s.major+"."+s.minor+" r"+s.release:a}var t={screenSize:b,browser:h,browserVersion:i,browserMajorVersion:j,mobile:k,os:m,osVersion:q,cookies:l,flashVersion:r};return JSON.stringify(t)}function appendUrl(){var a="";return["utm_campaign","utm_medium","utm_content","utm_source","utm_term"].forEach(function(b){getQueryParams(b)&&""!==getQueryParams(b).trim()&&(a+="&client_"+b+"="+getQueryParams(b))}),a}function addNudge(a,b,c){function d(d){emitEvent("Nudge","Impressions","artofliving__"+(a||"livewire")),document.getElementById(d).appendChild(g),g.classList.add("trilyo-nudge-fadeIn"),b&&(c||(c=""),g.innerHTML='<img src="'+e+'" style="height:55px;width:55px;min-width:55px;margin:3px"><div style="display:table-cell;margin-left:10px;height:60px;vertical-align:middle"><div class="trilyoNudgeTitle">'+b+'</div><div  class="trilyoNudgeSubTitle">'+c+'</div><img class="trilyo-nudge-close" src="https://content.trilyo.com/script-assets/close.svg" /></div>',g.querySelector(".trilyo-nudge-close").addEventListener("click",function(a){a.stopPropagation();try{g.parentNode.removeChild(g)}catch(a){}}),g.onclick=function(){emitEvent("Nudge","Clicks","artofliving__"+(a||"livewire")),parent.postMessage("open","*")}),setTimeout(function(){g.classList.remove("trilyo-nudge-fadeIn"),setTimeout(function(){g.className="trilyo-nudge trilyo-nudge-remove",setTimeout(function(){try{g.parentNode.removeChild(g)}catch(a){}},1e3)},1e3)},8e3)}var e,f=["trilyo-f-bl","trilyo-f-tl","trilyo-f-tr"];switch(a){case"booking":e="https://chat.trilyo.com/images/booking.png";break;default:e="https://chat.trilyo.com/svg/fire.png"}var g=document.createElement("div");g.setAttribute("class","trilyo-nudge");var h=!1;if(!document.querySelector(".trilyo-nudge"))for(var i in f)if(isAvailable(f[i])){h=!0,d(f[i]);break}if(!h)var j=setInterval(function(){console.log("IN INTERVAL");if(!document.querySelector(".trilyo-nudge"))for(var a in f)if(isAvailable(f[a])){!0,d(f[a]),clearInterval(j);break}},11e3);return g}function isAvailable(a){console.log("elemId",a);var b=document.getElementById(a);for(var c in b.childNodes){if(b.childNodes[c].className&&b.childNodes[c].className.indexOf("trilyo-modal-box--visible")>-1)return!1;if(b.childNodes[c].className&&b.childNodes[c].className.indexOf("trilyo-nudge")>-1)return!1}return!0}function showNudge(a){addNudge(a.category,a.title,a.subtitle)}function $watch(a){var b=document.querySelector(a);if(b){var c=new MutationObserver(function(a){valHandler(b)});if(b){c.observe(b,{attributes:!0,childList:!0,subtree:!0});try{b.onchange=function(){valHandler(b)},e.oninput=valHandler,e.onpropertychange=e.oninput}catch(a){}}}else setTimeout(function(){$watch(a)},1e3)}function valHandler(a){if(a){var b;try{a.innerHTML&&(b=a.innerHTML.trim().match(/[0-9,.]+/)[0])}catch(a){}cartValue=parseFloat(b||a.value),saveCartValue(cartValue)}}function saveCartValue(a){var b=new XMLHttpRequest;b.open("POST",trilyourl+"/saveCart"),b.setRequestHeader("Content-Type","application/json;charset=UTF-8"),b.onreadystatechange=function(){b.readyState==XMLHttpRequest.DONE&&(200==b.status?console.log("Subscribed to events"):b.status)},b.send(JSON.stringify({cart:a,sender:"46ab5f9c-c8d1-4ce2-a1cd-8bb5bf69eaf5"}))}function emitEvent(a,b,c){var d=new XMLHttpRequest,e="https://www.google-analytics.com/collect?v=1&tid=UA-75032329-5&ni=1&cid=46ab5f9c-c8d1-4ce2-a1cd-8bb5bf69eaf5&t=event&ec="+a+"&ea="+b+"&el="+c;d.open("GET",e),d.onreadystatechange=function(){d.readyState==XMLHttpRequest.DONE&&(200==d.status||d.status)},d.send()}function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function addXMasHat(){santa=document.createElement("img"),santa.src="https://firebasestorage.googleapis.com/v0/b/loginfirebase-178bc.appspot.com/o/Christmas-Hat-PNG-File.png?alt=media&token=da445e9d-a6f2-4b3c-be7f-d409f988f201",santa.id="trilyo-xmas",document.body.append(santa)}function checkGoalScript(){if("Goal"==pageType)if(console.log("PAGE IS GOAL"),"undefined"!=typeof CBData&&CBData){var a=document.createElement("script");a.type="text/javascript",a.src=trilyourl1+"/artofliving/goal/cloudbeds.js?v1",head.appendChild(a)}else console.log("SENDING GOAL"),sendGoal()}function isSmartDevice(a){return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(a.navigator.userAgent||a.navigator.vendor||a.opera)}function serviceWorkerSupported(){return"serviceWorker"in navigator}var disableSanta=!0,currentSanta="enabled",tday=new Date;(11==tday.getMonth()&&tday.getDate()>22||0==tday.getMonth()&&tday.getDate()<3)&&(disableSanta="disabled"==currentSanta);var xMasStart=(new Date).getFullYear()+"-12-23",xMasEnd=(new Date).getFullYear()+"-01-23",santa,trilyourl="https://chat.trilyo.com",apiUrl="https://api.trilyo.com",trilyofolderpath="/webapp/",loadBot=!0,brandColor=encodeURIComponent("#ffae00"),badge=encodeURIComponent("#F57F23"),textPrimary=encodeURIComponent("#FFF"),textSecondary=encodeURIComponent("#000"),cartConfig="",pageType="General",campaignKey="tcs_artofliving",interactionKey="tint_artofliving",campaigns=[],default_booking_name="",trilyourl1="https://chat.trilyo.com",trilyourl2="https://api.trilyo.com",accountKey="artofliving",oval="",override="",enable_bot_val="true",enable_bot="true"==enable_bot_val,enable_nudging=false;console.log("nudging",enable_nudging);var trilyofolderpath1="/",head=document.getElementsByTagName("head")[0],loadIntent=!1,loadBot=!0;if(document.referrer){var url=document.createElement("a");url.setAttribute("href",document.referrer);var refferr=url.hostname}var utm_campaign=getQueryParams("utm_source")||getQueryParams("utm_medium")||getQueryParams("utm_campaign");utm_campaign&&(utm_campaign="Campaign:"+utm_campaign);var titleTag=document.getElementsByTagName("title")[0],currUrl=window.location.href;if(titleTag)var title=titleTag.innerHTML;else var title=currUrl;if("Cart"==pageType&&(title="Cart"),"Goal"==pageType&&(title="Conversion"),getQueryParams("gclid"))var PPC="Google PPC";var ref=PPC||utm_campaign||refferr||"Direct",loadBotScript=function(){if(loadBot){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=trilyourl1+trilyofolderpath1+"/css/trilyochatui_v2.min.css?5",a.media="all",head.appendChild(a),document.body?appendScripts():ready(function(){appendScripts()})}};enable_bot&&!inIframe()&&loadBotScript();var ontrilyoload=function(a){addWebView(),checkGoalScript();for(var b in a){var c=a[b];if(c.design){var d=new trilyo.modal({footer:!1,closeLabel:"Close",closeMethods:c.design.hasChevron?[]:c.closeMethods||["button"],parent:c.design.position,campaign:c,hasChevron:c.design.hasChevron,chevronColor:c.design.vals.chevronColor||"#4E00AD",beforeOpen:function(a){var b=campaignKey+a.id;return!!("push-desktop"!=a.category.toLowerCase()&&"push-mobile"!=a.category.toLowerCase()||serviceWorkerSupported())&&(!(getCookie(b)>"")&&("all"==a.deploy.target||("desktop"==a.deploy.target&&0==isSmartDevice(window)||!("mobile"!=a.deploy.target||!isSmartDevice(window)))))},animation:c.design.animation,animationDuration:c.design.animationDuration,override:c.override,onOpen:function(a){return console.log("OPENED"),emitEvent("card","Impressions","artofliving__"+a.opts.campaign.id),!0},onFormSubmit:function(a,b){var c=a.opts.campaign;switch(setCookie(campaignKey+c.id,!0,c.deploy.cookie.onconversion,!0),c.category.toLowerCase()){case"collect-email":b.form_name=a.opts.campaign.name,submitLeadForm(b);break;case"collect-feedback":b.form_name=a.opts.campaign.name,console.log("form",b),submitLeadForm(b),c.settings&&c.settings.redirect_uri&&(console.log("REDIRECTING"),window.location.href=c.settings.redirect_uri)}emitEvent("card","Clicks","artofliving__"+c.id),a.close(!0)},onCTA:function(a){var b=a.opts.campaign;switch(setCookie(campaignKey+b.id,!0,b.deploy.cookie.onconversion,!0),b.category.toLowerCase()){case"open-chat":parent.postMessage("open","*");break;case"target-page":case"price-parity":b.settings.open_on_new_tab?window.open(b.settings.redirect_uri,"_blank"):window.location.href=b.settings.redirect_uri;break;case"push-desktop":case"push-mobile":askPermission(a.opts.campaign.settings.topic_name)}emitEvent("card","Clicks","artofliving__"+b.id),getCookie(interactionKey)>""&&"chatbot"!=getCookie(interactionKey)||setCookie(interactionKey,b.id),a.close(!0)},onClose:function(a){setCookie(campaignKey+a.id,!0,a.deploy.cookie.onclose,!0),emitEvent("card","Closed","artofliving__"+a.id)}});c.displayData&&(c.design.vals.data||(c.design.vals.data={}),c.displayData.priceData.Website&&(c.design.vals.showPrice=c.displayData.priceData.Website,formatDateShortMonth(c.design.vals.showPrice.date).toLowerCase()==formatDateShortMonth(new Date)?c.design.vals.showPrice.date="Today":console.log("NOT Today"),delete c.displayData.priceData.Website),c.design.vals.data=c.displayData),"price-parity"==c.category&&(c.design.vals.data||(c.design.vals.data={}),c.design.vals.data.currency=c.settings.currency),d.setContent(resolve(c.html.replace(/\n/gi,""),c.design.vals));new trilyo.trigger(d).addTrigger(c.settings.trigger.type,c.settings.trigger.options)}}},signupModal,trilyoThankYouModal;window.addEventListener("load",function(){if(getQueryParams("trilyo_focus"))for(var a=getQueryParams("trilyo_focus").split("."),b=a[0],c=a[1],d=document.querySelectorAll(b+":not(.trilyo)"),e=0;e<d.length;e++)if(e==c-1){const f=d[e].getBoundingClientRect().top+window.scrollY;openWidget({data:"open"}),window.scroll({top:f,behavior:"smooth"})}});var trilyochatcontainer,trilyoextenstioncontainer,trilyocontainerblock,trilyocontainer,trilyoquickprompt,stateLoaded,stateIsOpen,stateIsOpenOnce,isCookieEnabled=navigator.cookieEnabled,openWebView=function(a,b,c,d){document.getElementById("trilyoWebviewIframe").setAttribute("src",a),c&&(webview.modalBox.getElementsByClassName("trilyo-modal-box__content")[0].style.height=c),d&&(webview.modalBox.getElementsByClassName("trilyo-modal-box__content")[0].style.width=d),document.getElementById("trilyoWebviewTitle").innerHTML=b,setTimeout(function(){webview.open()},100)},addWebView=function(a){a||(a=["overlay","escape","button"]),webview=new trilyo.modal({footer:!1,closeMethods:a,cssClass:["webview"],closeLabel:"Close",parent:"trilyo-ab-center",onClose:function(a,b){document.getElementById("trilyoWebviewIframe").setAttribute("src","")}}),webview.setContent('<h2 style="color:#808080;font-weight:400;font-size:22px;padding: 0px;margin: 0px;position: absolute;top: 10px;line-height: 48px;width: 96%;" id="trilyoWebviewTitle"></h2><iframe id="trilyoWebviewIframe" frameborder=0 width="100%" height="90%" style="margin-top:64px"><iframe>'),document.getElementById("trilyoWebviewIframe").onload=function(){document.referrer}};if("Cart"==pageType&&cartConfig>""){setTimeout(function(){$watch(cartConfig)},1500);var elem=document.querySelector(cartConfig);valHandler(elem)}"Cart"==pageType&&emitEvent("Cart","open","The%20Art%20Of%20Living"),"Goal"==pageType&&emitEvent("Goal","reached","The%20Art%20Of%20Living"),function(){undefined}();var cumulativeOffset=function(a){var b=0,c=0;do{b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent}while(a);return{top:b,left:c}},backlink=document.createElement("a");backlink.setAttribute("href","https://www.trilyo.com"),backlink.setAttribute("title","Increase direct bookings"),backlink.innerHTML="Trilyo Hotel Chatbot and Voicebot",backlink.style.display="none",ready(function(){document.body.appendChild(backlink)});var trilyocsslink=document.createElement("link");trilyocsslink.rel="stylesheet",trilyocsslink.type="text/css",trilyocsslink.href=trilyourl1+"/style/artofliving/ui_overrides.css",trilyocsslink.media="all",head.appendChild(trilyocsslink);var formatDateShortMonth=function(a){if("string"==typeof a)try{a=new Date(a)}catch(b){a=new Date}var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=a.getDate(),d=a.getMonth(),e=a.getFullYear();return c+"-"+b[d]+"-"+e};